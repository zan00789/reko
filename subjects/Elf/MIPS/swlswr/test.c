// test.c
// Generated by decompiling test
// using Reko decompiler version 0.8.1.0.

#include "test.h"

// 00000588: Register word32 _init(Register word32 ra)
word32 _init(word32 ra)
{
	if (__gmon_start__ == 0x00)
	{
		ptr32 r25_n = *(ptr32 *) 0x00020A4C;
		word32 r2_n;
		(r25_n + 2004)();
		ptr32 r25_n = *(ptr32 *) 0x00020A4C;
		word32 r2_n;
		(r25_n + 0x0970)();
		return r2_n;
	}
	else
		__gmon_start__();
}

// 00000610: void __start(Register word32 r2, Stack word32 dwArg00)
void __start(word32 r2, word32 dwArg00)
{
	word32 r8_n = *(word32 *) 0x00020A60;
	<anonymous> * r25_n = *(<anonymous> **) 0x00020A24;
	r25_n();
	while (true)
		;
}

// 00000670: void deregister_tm_clones()
void deregister_tm_clones()
{
	Eq_n r2_n = globals->t10AA4;
	if (r2_n == 68228)
		return;
	<anonymous> * r25_n = globals->ptr10AE4;
	if (r25_n == null)
		return;
	r25_n();
}

// 000006A8: void register_tm_clones()
void register_tm_clones()
{
	Eq_n r5_n = globals->t10AA4 - 68228 >> 0x02;
	Eq_n r5_n = (word32) r5_n + (r5_n >> 0x1F);
	if (r5_n >> 0x01 == 0x00)
		return;
	<anonymous> * r25_n = globals->ptr10AD4;
	if (r25_n == null)
		return;
	r25_n();
}

// 000006F4: void __do_global_dtors_aux(Register word32 r3, Register word32 r4, Register word32 r16, Register word32 r17, Register word32 r18, Register word32 r19, Register word32 ra)
void __do_global_dtors_aux(word32 r3, word32 r4, word32 r16, word32 r17, word32 r18, word32 r19, word32 ra)
{
	if ((word32) globals->b10AF0 == 0x00)
	{
		if (__cxa_finalize != 0x00)
		{
			word32 r2_n = globals->dw10AAC;
			__cxa_finalize();
		}
		Eq_n r2_n = globals->t10AF4;
		Eq_n r16_n = (globals->dw10AB0 - 68200 >> 0x02) + -0x01;
		while ((word32) (r2_n < r16_n) != 0x00)
		{
			Eq_n r2_n = (word32) r2_n + 0x01;
			globals->t10AF4 = r2_n;
			<anonymous> ** r2_n = (r2_n << 0x02) + 68200;
			<anonymous> * r25_n = *r2_n;
			r25_n();
			r2_n = globals->t10AF4;
		}
		deregister_tm_clones();
		globals->b10AF0 = 0x01;
	}
}

// 000007D4: void frame_dummy()
void frame_dummy()
{
	register_tm_clones();
}

// 000007F0: void main()
void main()
{
	memset(fp + -0x0014, 0x00, 0x05);
	struct Eq_n * r2_n = calloc(0x01, 0x05);
	r2_n->t0000 = dwLoc14;
	r2_n->b0004 = (byte) (word32) bLoc10;
	r2_n->t0000.u0 = 0x0C;
	r2_n->dw0001 = 0x00;
	r2_n = r2_n;
	r3_n = dwLoc14;
	r2_n = r2_n;
}

// 000008C0: void __libc_csu_init(Register word32 r4, Register word32 r5, Register word32 r6, Register word32 r16, Register word32 r17, Register word32 r18, Register word32 r19, Register word32 r20, Register word32 r21, Register word32 ra)
void __libc_csu_init(word32 r4, word32 r5, word32 r6, word32 r16, word32 r17, word32 r18, word32 r19, word32 r20, word32 r21, word32 ra)
{
	word32 r2_n = _init(ra);
	word32 * r16_n = globals->ptr10ABC;
	int32 r18_n = globals->ptr10ABC - r16_n;
	if (r18_n >> 0x02 != 0x00)
	{
		int32 r17_n = 0x00;
		while (true)
		{
			<anonymous> * r25_n = *r16_n;
			r25_n();
			++r17_n;
			if (r18_n >> 0x02 == r17_n)
				break;
			++r16_n;
		}
	}
}

// 00000964: void __libc_csu_fini()
void __libc_csu_fini()
{
}

// 00000970: void __do_global_ctors_aux(Register word32 r16, Register word32 r17, Register word32 ra)
void __do_global_ctors_aux(word32 r16, word32 r17, word32 ra)
{
	ptr32 r3_n = 0x00010000;
	int32 r2_n = -0x01;
	<anonymous> * r25_n = globals->ptr10A60;
	if (r25_n != (<anonymous> *) -0x01)
	{
		word32 * r16_n = &globals->ptr10A60;
		do
		{
			r25_n();
			r16_n += -0x01;
			r25_n = *r16_n;
		} while (r25_n != (<anonymous> *) -0x01);
	}
}

// 000009D0: void __libc_start_main(Register ptr32 r28, Register word32 ra)
void __libc_start_main(ptr32 r28, word32 ra)
{
	<anonymous> * r25_n = *(r28 - 0x7FF0);
	r25_n();
}

// 000009E0: void memset(Register ptr32 r28, Register word32 ra)
void memset(ptr32 r28, word32 ra)
{
	<anonymous> * r25_n = *(r28 - 0x7FF0);
	r25_n();
}

// 000009F0: void calloc(Register ptr32 r28, Register word32 ra)
void calloc(ptr32 r28, word32 ra)
{
	<anonymous> * r25_n = *(r28 - 0x7FF0);
	r25_n();
	_fini(ra);
}

// 00000A10: void _fini(Register word32 ra)
void _fini(word32 ra)
{
	ptr32 r25_n = *(ptr32 *) 0x00020A4C;
	(r25_n + 0x06F4)();
}

